<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manajemen</title>
    <link rel="stylesheet" href="../CSS/Manajemen_Sampah.css">
    <script src="../../Back/JS/Active_Button.js"></script>
</head>

<body>
    <nav class="navbar">
        <div class="navbar-container">
        </div>
        <div class="navbar-menu">
            <a href="Dashboard.html" class="Navbar-Item">Beranda</a>
            <a href="Setoran_Sampah.html" class="Navbar-Item">Setor</a>
            <a href="Manajemen_Sampah.html" class="Navbar-Item">Kelola</a>
            <a href="Market.html" class="Navbar-Item">Market</a>
            <a href="#" class="Navbar-Item">Bantuan</a>
            <a href="Login_Page.html" class="Navbar-Item" id="Navbar-Item-LogOut">Logout</a>
        </div>
    </nav>

    <main>
        <!-- Edit, Delete dan cetak Struk disini bagian js -->
        <div>
            <table class="Table-Sampah">
                <input type="search" id="Search" placeholder="Search">
                <thead>
                    <tr>
                        <th scope="col">nama</th>
                        <th scope="col">Tanggal</th>
                        <th scope="col">Jenis Sampah</th>
                        <th scope="col">Berat (kg)</th>
                        <th scope="col">Edit</th>
                    </tr>
                </thead>
                <tbody id="dataSampah">
                    <script src="../../Back/JS/Manajemen_sampah.js"></script>
                    <script src="../../Back/JS/Manajemen_sampah.js"></script>

                    <!-- <script>
                        document.addEventListener("DOMContentLoaded", function () {
                            fetch("../../Back/php/get_data_sampah.php")
                                .then(response => response.json())
                                .then(data => {
                                    const tbody = document.getElementById("dataSampah");
                                    data.forEach(item => {
                                        const tr = document.createElement("tr");

                                        tr.innerHTML = `
                                        <td>${item.nama}</td>
                                        <td>${item.tanggal}</td>
                                        <td>${item.nama_jenis}</td>
                                        <td>${item.berat}</td>
                                        <td>
                                            <button onclick='showEditForm(${JSON.stringify(item)})'>Edit</button>
                                            <button onclick='showStruk(${JSON.stringify(item)})'>Cetak</button>
                                        </td>
                                    `;
                                        tbody.appendChild(tr);
                                    });
                                })
                                .catch(error => console.error("Error fetch data:", error));
                        });

                        function showEditForm(dataStr) {
                            const data = JSON.parse(decodeURIComponent(dataStr));

                            document.getElementById("editnama").value = data.nama;
                            document.getElementById("editTanggal").value = data.tanggal;
                            document.getElementById("editJenisSampah").value = data.nama_jenis;
                            document.getElementById("editBerat").value = data.berat;

                            // Tampilkan form edit
                            document.querySelector(".Table-Edit").style.display = "block";
                        }

                        function Close() {
                            document.querySelector(".Table-Edit").style.display = "none";
                        }
                    </script> -->
                </tbody>
        </div>

        <div class="Table-Edit">
            <div class="Table-Edit-Content">
                <h3>Edit Data Sampah</h3>
                <input type="text" class="Form-Edit" id="editnama" placeholder="Nama">
                <input type="date" class="Form-Edit" id="editTanggal">
                <select class="Form-Edit" id="editJenisSampah">
                    <option value="">Pilih Jenis Sampah</option>
                    <option value="Plastic">Plastic</option>
                    <option value="Kertas">Kertas</option>
                    <option value="Logam">Logam</option>
                    <option value="Kaca">Kaca</option>
                </select>
                <input type="number" class="Form-Edit" id="editBerat" placeholder="Berat (kg)" min="0" step="0.01">
                <button class="Button-Edit" onclick="editData()">Simpan</button>
                <button class="Button-Edit" onclick="Close()">Batal</button>
            </div>
        </div>

        <div class="Table-Struk">
            <div class="Table-Struk-Content">
                <h2 class="Table-Struk-in">Bank sampah</h2>
                <p class="Table-Struk-in">=======================================</p>
                <p class="Table-Struk-in">Nama: <span id="nama"></span></p>
                <p class="Table-Struk-in">Jenis Sampah: <span id="jenis"></span></p>
                <p class="Table-Struk-in">Berat: <span id="berat"></span> kg</p>
                <p class="Table-Struk-in">Harga/kg: Rp <span id="harga"></span></p>
                <p class="Table-Struk-in">=======================================</p>
                <p class="Table-Struk-in"><strong>Total: Rp <span id="total"></span></strong></p>
                <p class="Table-Struk-in">=======================================</p>
                <p class="Table-Struk-in">Tanggal: <span id="tanggal"></span></p>
                <button type="submit" class="Button-Cetak">Cetak</button>
            </div>
        </div>
    </main>
</body>

</html>